"use strict";(new XMLHttpRequest).responseType="json",window.Backend=function(){this.xhr2=new XMLHttpRequest,this.xhr2.responseType="json"},Backend.prototype.saveData=function(e,n,t,l){this.xhr2.addEventListener("load",function(){200===this.status?t(this.response):l("server status: "+this.status+" "+this.statusText)}),this.xhr2.open("POST",e,!0),this.xhr2.send(n),console.log(n)},function(){var e=new window.Backend,n=document.querySelector(".form__btn"),t=function(e){document.querySelector(".form__body").style.display="none";var n=document.createElement("div");n.classList.add("msg-ok"),n.innerHTML='<img src="img/success.png"><p>Your message send!</p>',document.querySelector(".form__content").appendChild(n)},l=function(e){console.log(e)};n.addEventListener("click",function(a){if(a.preventDefault(),window.validClass.checkEmpty(document.querySelectorAll(".required")),grecaptcha.getResponse()){if(window.validClass.checkEmpty(document.querySelectorAll(".required"))&&window.validClass.checkEmail(document.querySelector("#email"))){var i={name:document.querySelector("#name").value,mail:document.querySelector("#email").value,message:document.querySelector("#message").value};n.innerHTML='<div class="windows8">\n<div class="wBall" id="wBall_1">\n<div class="wInnerBall"></div>\n</div><div class="wBall" id="wBall_2"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_3">\n<div class="wInnerBall"></div>\n</div>\n<div class="wBall" id="wBall_4">\n<div class="wInnerBall"></div>\n</div>\n<div class="wBall" id="wBall_5">\n<div class="wInnerBall"></div>\n</div>\n</div>',n.style.padding="9px 37px",n.setAttribute("disabled",""),e.saveData("http://api.intelligenthookah.com/serv.php",JSON.stringify(i),t,l)}}else{var s=document.createElement("div");s.classList.add("err-captcha"),s.innerText="Captcha is empty!",document.querySelector(".capcha__wrap").appendChild(s),setTimeout(function(){document.querySelector(".capcha__wrap").removeChild(s)},1e3)}})}(),function(){var e=function(){this.data={}};e.prototype.checkEmail=function(e){if(!/\S+@\S+\.\S+/.test(e.value)){var n=document.createElement("div");return n.classList.add("err-input"),n.innerText="Error email!",e.parentElement.appendChild(n),setTimeout(function(){e.parentElement.removeChild(n)},1e3),!1}return!0},e.prototype.numberInput=function(){(event.keyCode<48||event.keyCode>57)&&(event.returnValue=!1)},e.prototype.checkPhone=function(e){console.log(e),console.log(e.value),e.value=e.value.replace(/[^0-9]/g,"")},e.prototype.checkEmpty=function(e){var n=[];return e.forEach(function(e){var n=e.parentElement.children;if(e.value){if(e.parentElement.hasChildNodes()){console.log(n);for(var t=0;t<n.length;t++)n[t].classList.contains("err-input")&&(console.log(n[t]),console.log(n),n[t].remove())}}else{for(var l=0;l<n.length;l++)n[l].classList.contains("err-input")&&(console.log(n[l]),console.log(n),n[l].remove());var a=document.createElement("div");a.classList.add("err-input"),a.innerText="Input is Empty!",e.parentElement.appendChild(a),setTimeout(function(){e.parentElement.removeChild(a)},1e3)}}),e.forEach(function(e){e.value||n.push(e)}),!n.length},window.validClass=new e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tlbmQuanMiLCJtYWluLmpzIiwidmFpbGQtY2xhc3MuanMiXSwibmFtZXMiOlsiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVR5cGUiLCJ3aW5kb3ciLCJCYWNrZW5kIiwidGhpcyIsInhocjIiLCJwcm90b3R5cGUiLCJzYXZlRGF0YSIsIlVSTF9TRU5EIiwiZGF0YSIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwic3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib3BlbiIsInNlbmQiLCJjb25zb2xlIiwibG9nIiwiY29ubmVjdCIsInNlbmRGb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib25TdWNjZXNzRGVsaXZlciIsInN0eWxlIiwiZGlzcGxheSIsIm1zZ1N1Y2NzZXNzIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwib25GYXRhbERlbGl2ZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbGlkQ2xhc3MiLCJjaGVja0VtcHR5IiwicXVlcnlTZWxlY3RvckFsbCIsImdyZWNhcHRjaGEiLCJnZXRSZXNwb25zZSIsImNoZWNrRW1haWwiLCJuYW1lIiwidmFsdWUiLCJtYWlsIiwibWVzc2FnZSIsInBhZGRpbmciLCJzZXRBdHRyaWJ1dGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyIiwiaW5uZXJUZXh0Iiwic2V0VGltZW91dCIsInJlbW92ZUNoaWxkIiwiVmFsaWREYXRhIiwiaW5wdXQiLCJ0ZXN0IiwicGFyZW50RWxlbWVudCIsIm51bWJlcklucHV0IiwiZXZlbnQiLCJrZXlDb2RlIiwicmV0dXJuVmFsdWUiLCJjaGVja1Bob25lIiwicmVwbGFjZSIsImFycklucHV0IiwiY2hlY2tWYWwiLCJmb3JFYWNoIiwiaXRlbSIsImFsbENoaWxkcmVuIiwiY2hpbGRyZW4iLCJoYXNDaGlsZE5vZGVzIiwiZWxlbSIsImxlbmd0aCIsImNv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QUFjRCxFQUFLVixjQUFjWSxTQUVyQyxHQUFLRixFQUFLeEIsT0FpQkgsR0FBSXdCLEVBQUtWLGNBQWNhLGdCQUFpQixDQUMzQ3BELFFBQVFDLElBQUlpRCxHQUNaLElBQUssSUFBSUcsRUFBTyxFQUFHQSxFQUFPSCxFQUFZSSxPQUFRRCxJQUN0Q0gsRUFBWUcsR0FBTTFDLFVBQVU0QyxTQUFTLGVBQ3JDdkQsUUFBUUMsSUFBSWlELEVBQVlHLElBQ3hCckQsUUFBUUMsSUFBSWlELEdBQ1pBLEVBQVlHLEdBQU1HLGVBdkJiLENBQ2IsSUFBSyxJQUFJQyxFQUFPLEVBQUdBLEVBQU9QLEVBQVlJLE9BQVFHLElBQ3RDUCxFQUFZTyxHQUFNOUMsVUFBVTRDLFNBQVMsZUFDckN2RCxRQUFRQyxJQUFJaUQsRUFBWU8sSUFDeEJ6RCxRQUFRQyxJQUFJaUQsR0FDWkEsRUFBWU8sR0FBTUQsVUFJMUIsSUFBSXhCLEVBQU01QixTQUFTTSxjQUFjLE9BQ2pDc0IsRUFBSXJCLFVBQVVDLElBQUksYUFDbEJvQixFQUFJQyxVQUFZLGtCQUNoQmdCLEVBQUtWLGNBQWN6QixZQUFZa0IsR0FDL0JFLFdBQVcsV0FDUGUsRUFBS1YsY0FBY0osWUFBWUgsSUFDakMsUUFhVmMsRUFBU0UsUUFBUSxTQUFVQyxHQUNsQkEsRUFBS3hCLE9BQ05zQixFQUFTVyxLQUFLVCxNQUdkRixFQUFTTyxRQUlyQnRFLE9BQU9rQyxXQUFhLElBQUlrQixFQTNFNUIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB3aW5kb3cuQmFja2VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54aHIyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHRoaXMueGhyMi5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgfTtcbiAgICBCYWNrZW5kLnByb3RvdHlwZS5zYXZlRGF0YSA9IGZ1bmN0aW9uKFVSTF9TRU5ELGRhdGEsb25TdWNjZXNzLCBvbkVycm9yKXtcbiAgICAgICAgdGhpcy54aHIyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIG9uU3VjY2Vzcyh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb25FcnJvcignc2VydmVyIHN0YXR1czogJyArIHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy54aHIyLm9wZW4oJ1BPU1QnLCBVUkxfU0VORCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMueGhyMi5zZW5kKGRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgIH07XG59KSgpOyIsIid1c2Ugc3RyaWN0JztcbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbm5lY3QgPSBuZXcgd2luZG93LkJhY2tlbmQoKTtcbiAgICB2YXIgX3VybCA9ICdodHRwOi8vYXBpLmludGVsbGlnZW50aG9va2FoLmNvbS9zZXJ2LnBocCc7XG5cbiAgICB2YXIgc2VuZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYnRuJyk7XG5cbiAgICB2YXIgb25TdWNjZXNzRGVsaXZlciA9IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYm9keScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHZhciBtc2dTdWNjc2VzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBtc2dTdWNjc2Vzcy5jbGFzc0xpc3QuYWRkKCdtc2ctb2snKTtcbiAgICAgICAgbXNnU3VjY3Nlc3MuaW5uZXJIVE1MID0gJzxpbWcgc3JjPVwiaW1nL3N1Y2Nlc3MucG5nXCI+PHA+WW91ciBtZXNzYWdlIHNlbmQhPC9wPic7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19jb250ZW50JykuYXBwZW5kQ2hpbGQobXNnU3VjY3Nlc3MpO1xuICAgIH07XG5cbiAgICB2YXIgb25GYXRhbERlbGl2ZXIgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICB9O1xuXG4gICAgc2VuZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB3aW5kb3cudmFsaWRDbGFzcy5jaGVja0VtcHR5KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXF1aXJlZCcpKTtcbiAgICAgICAgaWYoIWdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKSl7XG4gICAgICAgICAgICB2YXIgZXJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBlcnIuY2xhc3NMaXN0LmFkZCgnZXJyLWNhcHRjaGEnKTtcbiAgICAgICAgICAgIGVyci5pbm5lclRleHQgPSAnQ2FwdGNoYSBpcyBlbXB0eSEnO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcGNoYV9fd3JhcCcpLmFwcGVuZENoaWxkKGVycik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FwY2hhX193cmFwJykucmVtb3ZlQ2hpbGQoZXJyKTtcbiAgICAgICAgICAgIH0sMTAwMCk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIGlmKHdpbmRvdy52YWxpZENsYXNzLmNoZWNrRW1wdHkoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlcXVpcmVkJykpKXtcbiAgICAgICAgICAgICAgICBpZih3aW5kb3cudmFsaWRDbGFzcy5jaGVja0VtYWlsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbCcpKSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbCcpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2UnKS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzZW5kRm9ybS5pbm5lckhUTUw9JzxkaXYgY2xhc3M9XCJ3aW5kb3dzOFwiPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3QmFsbFwiIGlkPVwid0JhbGxfMVwiPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3SW5uZXJCYWxsXCI+PC9kaXY+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndCYWxsXCIgaWQ9XCJ3QmFsbF8yXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndJbm5lckJhbGxcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid0JhbGxcIiBpZD1cIndCYWxsXzNcIj5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid0lubmVyQmFsbFwiPjwvZGl2PlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3QmFsbFwiIGlkPVwid0JhbGxfNFwiPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3SW5uZXJCYWxsXCI+PC9kaXY+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndCYWxsXCIgaWQ9XCJ3QmFsbF81XCI+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndJbm5lckJhbGxcIj48L2Rpdj5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBzZW5kRm9ybS5zdHlsZS5wYWRkaW5nID0nOXB4IDM3cHgnO1xuICAgICAgICAgICAgICAgICAgICBzZW5kRm9ybS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywnJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Quc2F2ZURhdGEoX3VybCwgSlNPTi5zdHJpbmdpZnkoZGF0YSksIG9uU3VjY2Vzc0RlbGl2ZXIsIG9uRmF0YWxEZWxpdmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufSkoKTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgVmFsaWREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICB9O1xuXG4gICAgVmFsaWREYXRhLnByb3RvdHlwZS5jaGVja0VtYWlsID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHZhciByZSA9IC9cXFMrQFxcUytcXC5cXFMrLztcbiAgICAgICAgLy8gaWYgKCFpbnB1dC52YWx1ZSkge1xuICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMubXNnLmVtcHR5TXNnO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmICghcmUudGVzdChpbnB1dC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGVyci5jbGFzc0xpc3QuYWRkKCdlcnItaW5wdXQnKTtcbiAgICAgICAgICAgIGVyci5pbm5lclRleHQgPSAnRXJyb3IgZW1haWwhJztcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZXJyKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZXJyKTtcbiAgICAgICAgICAgIH0sMTAwMCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFZhbGlkRGF0YS5wcm90b3R5cGUubnVtYmVySW5wdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA8IDQ4IHx8IGV2ZW50LmtleUNvZGUgPiA1NylcbiAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlPSBmYWxzZTtcbiAgICB9O1xuICAgIFZhbGlkRGF0YS5wcm90b3R5cGUuY2hlY2tQaG9uZSA9IGZ1bmN0aW9uKGlucHV0KXtcbiAgICAgICAgY29uc29sZS5sb2coaW5wdXQpO1xuICAgICAgICBjb25zb2xlLmxvZyhpbnB1dC52YWx1ZSk7XG4gICAgICAgIGlucHV0LnZhbHVlID0gaW5wdXQudmFsdWUucmVwbGFjZSgvW14wLTldL2csXCJcIik7XG4gICAgfTtcblxuICAgIFZhbGlkRGF0YS5wcm90b3R5cGUuY2hlY2tFbXB0eSA9IGZ1bmN0aW9uIChhcnJJbnB1dCkge1xuICAgICAgICB2YXIgY2hlY2tWYWwgPSBbXTtcbiAgICAgICAgYXJySW5wdXQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIGFsbENoaWxkcmVuID0gaXRlbS5wYXJlbnRFbGVtZW50LmNoaWxkcmVuO1xuXG4gICAgICAgICAgICBpZiAoIWl0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0YWtlID0gMDsgdGFrZSA8IGFsbENoaWxkcmVuLmxlbmd0aDsgdGFrZSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxDaGlsZHJlblt0YWtlXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Vyci1pbnB1dCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxDaGlsZHJlblt0YWtlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxDaGlsZHJlblt0YWtlXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlcnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBlcnIuY2xhc3NMaXN0LmFkZCgnZXJyLWlucHV0Jyk7XG4gICAgICAgICAgICAgICAgZXJyLmlubmVyVGV4dCA9ICdJbnB1dCBpcyBFbXB0eSEnO1xuICAgICAgICAgICAgICAgIGl0ZW0ucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChlcnIpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZXJyKTtcbiAgICAgICAgICAgICAgICB9LDEwMDApXG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5wYXJlbnRFbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbENoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBlbGVtID0gMDsgZWxlbSA8IGFsbENoaWxkcmVuLmxlbmd0aDsgZWxlbSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxDaGlsZHJlbltlbGVtXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Vyci1pbnB1dCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxDaGlsZHJlbltlbGVtXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxDaGlsZHJlbltlbGVtXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFycklucHV0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICghaXRlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNoZWNrVmFsLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gIWNoZWNrVmFsLmxlbmd0aDtcbiAgICB9O1xuXG5cbiAgICB3aW5kb3cudmFsaWRDbGFzcyA9IG5ldyBWYWxpZERhdGEoKTtcbn0pKCk7Il0sImZpbGUiOiJhbGwubWluLmpzIn0=
